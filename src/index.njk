---
layout: default
eleventyExcludeFromCollections: true
---

{% import "./_includes/macro/svg.njk" as svg %} {% include './_includes/partials/infobar.njk' %}

<section class="resourceContainer">
  <aside class="resourceContainer__sidebar" x-show.transition.origin.top.center="navDisplayed">
    {#
    <div>
      <a href="#">Add resource</a>
    </div>
    #}

    <div class="resourceContainer__sidebar__resourceCount resourceContainer__sidebar__resourceCount--no-js">
      There are {{ sheet | countResources }} resources available
    </div>

    <div class="resourceContainer__sidebar__resourceCount resourceContainer__sidebar__resourceCount--js">
      Listing <span x-text="filteredItems().length ? `${filteredItems().length} of `:''"></span
      >{{ sheet | countResources }} resources
    </div>

    <nav class="sectionNav">

      {# NOTE: The following two <ul> sections should stay in sync #}
        
      <ul x-show="!query">
        {% for key, item in sheet %}
        <li>
          <a href="#{{ key | slug }}" class="sectionNav__link" @click.away="navDisplayed = false">
            {{ key }}
          </a>
        </li>
        {% endfor %}
      </ul>

      <ul x-show="!!query">
        <template x-for="section in filteredSections()" :key="section.name">
          <li>
            <span class="sectionNav__link opacity-50" x-text="section.name" x-show="section.items.length == 0"></span>
            <a
              :href="'#' + slugify(section.name)"
              class="sectionNav__link"
              x-show="section.items.length > 0"
              @click.away="navDisplayed = false"
            >
              <span x-text="section.name"></span> ( <span x-text="section.items.length"></span> )
            </a>
          </li>
        </template>
      </ul>
    </nav>
  </aside>

  <main class="resourceContainer__mainList">
    <section id="filter" class="searchField">
      <input type="text" class="searchField__input" placeholder="SEARCH" x-model="query" />
      {{ svg.sprite("search", "searchField__icon") }}
    </section>

    <div x-show="!!query">
      <template x-for="section in filteredSections()" :key="section.name">
        <section x-show="section.items.length > 0" class="resourceContainer__mainList__section">
          <h1 x-text="section.name" :id="slugify(section.name)"></h1>

          <template x-for="item in section.items" :key="item.title">
            {% include './_includes/partials/resource_dynamic.njk' %}
          </template>
        </section>
      </template>
    </div>

    <div x-show="!query">
      {% for key, item in sheet %}
      <section id="{{ key | slug }}" class="resourceContainer__mainList__section">
        <h1>{{ key }}</h1>

        {% for resource in item %} {% include './_includes/partials/resource.njk' %} {% endfor %}
      </section>
      {% endfor %}
    </div>
  </main>
</section>
